<h2>Edit organism</h2>
<form class="form-horizontal" name="form01" data-ng-submit="form01.$valid && vm.saveForm()">
    <p>
        <a href="#/" class="btn btn-default"><span class="glyphicon glyphicon-chevron-left"></span> back to the organism list</a>
    </p>
    <datalist id="dl-gathering" data-ng-if="vm.existingGatherings">
        <option data-ng-repeat="gathering in vm.existingGatherings track by gathering.id"
                value="{{gathering.journalNumber}}">
            {{gathering.journalNumber}}: {{gathering.date}}; {{gathering.agent}} ({{gathering.location}})
        </option>
    </datalist>
    <datalist id="dl-specimen-carrier" data-ng-if="vm.existingSpecimenCarriers">
        <option data-ng-repeat="specimenCarrier in vm.existingSpecimenCarriers | filter:vm.filterCarriers track by specimenCarrier.carrierNumber"
                value="{{specimenCarrier.carrierNumber}}">
            {{specimenCarrier.carrierNumber}}: {{specimenCarrier.preparationType}} “{{specimenCarrier.labelTranscript}}”
        </option>
    </datalist>
    <div class="row">
        <div class="col-md-6">
            <fieldset>
                <legend class="col-sm-offset-3 col-sm-9" title="{{vm.gathering.id}}">
                    Gathering
                </legend>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc01">Collection number</label>
                    <div class="col-sm-9">
                        <input id="fc01"
                                name="fc01"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gatheringJournalNumber"
                                data-ng-model-options="{ getterSetter: true }"
                                autocomplete="off"
                                required="required"
                                list="{{vm.existingGatherings ? 'dl-gathering' : null}}" />
                    </div>
                    <div class="col-sm-9 col-sm-offset-3"
                            data-ng-messages="form01.fc01.$error"
                            role="alert">
                        <div data-ng-message="required">A journal number is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc02">Sampled: On or after</label>
                    <div class="col-sm-9">
                        <input id="fc02"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.dateAfter"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                    <label class="control-label col-sm-3" for="fc03">To</label>
                    <div class="col-sm-9">
                        <input id="fc03"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.dateBefore"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc04">Collector(s)</label>
                    <div class="col-sm-9">
                        <input id="fc04"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.person"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                    <label class="control-label col-sm-3" for="fc05">Organization</label>
                    <div class="col-sm-9">
                        <input id="fc05"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.organization"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc06">Location: place</label>
                    <div class="col-sm-9">
                        <input id="fc06"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.place"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                    <label class="control-label col-sm-3" for="fc07">Region</label>
                    <div class="col-sm-9">
                        <input id="fc07"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.region"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                    <label class="control-label col-sm-3" for="fc08">Province</label>
                    <div class="col-sm-9">
                        <input id="fc08"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.province"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                    <label class="control-label col-sm-3" for="fc09">Country</label>
                    <div class="col-sm-9">
                        <input id="fc09"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.gathering.country"
                                data-ng-disabled="vm.existingGathering" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc10">Remarks</label>
                    <div class="col-sm-9">
                        <textarea id="fc10"
                                class="form-control"
                                data-ng-model="vm.gathering.remarks"
                                data-ng-disabled="vm.existingGathering"></textarea>
                    </div>
                </div>
            </fieldset>
            <fieldset>
                <legend class="col-sm-offset-3 col-sm-9" title="{{vm.specimenCarrier.id}}">
                    Specimen carrier
                </legend>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc11">Carrier number</label>
                    <div class="col-sm-9">
                        <input id="fc11"
                                name="fc11"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.specimenCarrierNumber"
                                data-ng-model-options="{ getterSetter: true }"
                                autocomplete="off"
                                required="required"
                                data-ng-disabled="vm.originalSpecimenCarrier"
                                list="{{vm.existingSpecimenCarriers ? 'dl-specimen-carrier' : null}}" />
                    </div>
                    <div class="col-sm-9 col-sm-offset-3"
                            data-ng-messages="form01.fc11.$error"
                            role="alert">
                        <div data-ng-message="required">A carrier number is required.</div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc12">Preparation type</label>
                    <div class="col-sm-9">
                        <select id="fc12"
                                class="form-control"
                                data-ng-model="vm.specimenCarrier.preparationType"
                                data-ng-disabled="vm.existingSpecimenCarrier">
                            <option value="temporaryDry">Permanent dry mount</option>
                            <option value="permanent">Permanent microscope slide</option>
                            <option value="temporary">Temporary wet mount</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc13">Collection</label>
                    <div class="col-sm-9">
                        <input id="fc13"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.specimenCarrier.owner"
                                data-ng-disabled="vm.existingSpecimenCarrier" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc14">Previous collection</label>
                    <div class="col-sm-9">
                        <input id="fc14"
                                class="form-control"
                                type="text"
                                data-ng-model="vm.specimenCarrier.previousCollection"
                                data-ng-disabled="vm.existingSpecimenCarrier" />
                    </div>
                </div>
                <div class="form-group">
                    <label class="control-label col-sm-3" for="fc15">Label transcript</label>
                    <div class="col-sm-9">
                        <textarea id="fc15"
                                class="form-control"
                                data-ng-model="vm.specimenCarrier.labelTranscript"
                                data-ng-disabled="vm.existingSpecimenCarrier"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
        <fieldset class="col-md-6">
            <legend class="col-sm-offset-3 col-sm-9" title="{{vm.organism.id}}">Organism</legend>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc16">Sequence number</label>
                <div class="col-sm-9">
                    <input id="fc16"
                            class="form-control"
                            name="fc16"
                            type="text"
                            required="required"
                            data-ng-disabled="vm.originalOrganism"
                            data-ng-model="vm.organism.sequenceNumber"
                            data-validate="vm.validateSeqNo" />
                </div>
                <div class="col-sm-9 col-sm-offset-3"
                        data-ng-messages="form01.fc16.$error"
                        role="alert">
                    <div data-ng-message="validate">Sequence no. already in use.</div>
                    <div data-ng-message="required">A Sequence no. is required.</div>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc17">Type status</label>
                <div class="col-sm-9">
                    <select id="fc17" name="fc17" class="form-control" data-ng-model="vm.organism.typeStatus">
                        <option value="">(none)</option>
                        <option value="holotype">Holotype</option>
                        <option value="paratype">Paratype</option>
                        <option value="syntype">Syntype</option>
                    </select>
                </div>
            </div>
            <div class="form-group" data-ng-hide="vm.organism.typeStatus">
                <label class="control-label col-sm-3" for="fc18">Identified by</label>
                <div class="col-sm-9">
                    <input id="fc18" name="fc18" class="form-control" type="text" data-ng-model="vm.organism.identifier" />
                </div>
            </div>
            <div class="form-group" data-ng-hide="vm.organism.typeStatus">
                <label class="control-label col-sm-3" for="fc19">Identification qualifier</label>
                <div class="col-sm-9">
                    <input id="fc19" name="fc19" class="form-control" type="text" data-ng-model="vm.organism.qualifier" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc20">Full original name</label>
                <div class="col-sm-9">
                    <input id="fc20" name="fc20" class="form-control" type="text" data-ng-model="vm.organism.scientificName" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc21">Full valid name</label>
                <div class="col-sm-9">
                    <input id="fc21" name="fc21" class="form-control" type="text" data-ng-model="vm.organism.validName" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc22">Other synonyms</label>
                <div class="col-sm-9">
                    <textarea id="fc22" name="fc22" class="form-control" style="white-space: pre" rows="3" data-ng-model="vm.organism.otherSynonyms"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc23">Higher taxa<br />(high to low)</label>
                <div class="col-sm-9">
                    <textarea id="fc23" name="fc23" class="form-control" rows="6" data-ng-model="vm.organism.higherTaxa"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc24">Phase or stage</label>
                <div class="col-sm-9">
                    <input id="fc24" name="fc24" class="form-control" type="text" data-ng-model="vm.organism.phaseOrStage" />
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc25">Sex</label>
                <div class="col-sm-9">
                    <select id="fc25" name="fc25" class="form-control" data-ng-model="vm.organism.sex">
                        <option value="unknown">Unknown</option>
                        <option value="female">Female</option>
			<option value="hermaphrodite">Hermaphrodite</option>
                        <option value="male">Male</option>
                        <option value="not-applicable">Not-applicable</option>
                        <option value="mixed">Mixed</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-sm-3" for="fc26">Remarks</label>
                <div class="col-sm-9">
                    <textarea id="fc26" name="fc26" class="form-control" data-ng-model="vm.organism.remarks"></textarea>
                </div>
            </div>
        </fieldset>
    </div>
    <fieldset class="col-md-6" data-ng-show="vm.uploads">
        <legend class="col-sm-offset-3 col-sm-9">Photomicrographs</legend>
        <div class="row">
            <div class="form-group">
                <label for="fc27" class="control-label col-sm-3">Import .las file</label>
                <div class="col-sm-9">
                    <select id="fc27"
                            class="form-control"
                            data-ng-model="vm.lasUri"
                            data-ng-options="upload.uri group by resolveOrderValue(uploadOrderFunc(upload)) for upload in vm.uploads | orderBy:uploadOrderFunc"></select>
                </div>
            </div>
            <div class="form-group">
                <label for="fc27" class="control-label col-sm-3">Create</label>
                <div class="col-sm-9">
                    <a class="btn btn-default" data-ng-href="#/photomicrograph/new/{{vm.organism.id}}">From scratch</a>
                </div>
            </div>
        </div>
    </fieldset>
    <div class="col-md-12">
        <table class="table table-condensed col-sm-10">
            <colgroup>
                <col width="40%" />
                <col width="12%" />
                <col width="12%" />
                <col width="12%" />
                <col width="12%" />
                <col width="12%" />
            </colgroup>
            <thead>
                <tr>
                    <th id="cl01" scope="col" class="column-sort" data-ng-class="{
		                asc: vm.sort === 'title' && !vm.desc,
		                desc: vm.sort === 'title' && vm.desc
		            }" data-ng-click="vm.sortBy('title')">Title</th>
                    <th id="cl02" scope="col" class="column-sort" data-ng-class="{
		                asc: vm.sort === 'creatorCapturing' && !vm.desc,
		                desc: vm.sort === 'creatorCapturing' && vm.desc
		            }" data-ng-click="vm.sortBy('creatorCapturing')">Creator capturing</th>
                    <th id="cl03" scope="col" class="column-sort" data-ng-class="{
		                asc: vm.sort === 'creatorProcessing' && !vm.desc,
		                desc: vm.sort === 'creatorProcessing' && vm.desc
		            }" data-ng-click="vm.sortBy('creatorProcessing')">Creator processing</th>
                    <th id="cl04" scope="col" class="column-sort" data-ng-class="{
		                asc: vm.sort === 'microscopeSettingsDicPrismPosition' && !vm.desc,
		                desc: vm.sort === 'microscopeSettingsDicPrismPosition' && vm.desc
		            }" data-ng-click="vm.sortBy('microscopeSettingsDicPrismPosition')">DIC prism position</th>
                    <th>Show</th>
                    <th>Other Metadata</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="photomicrograph in vm.photomicrographs | orderBy:vm.sort:vm.desc">
                    <td>
                        <input class="form-control"
                                type="text"
                                aria-labelledby="cl01"
                                data-ng-model="photomicrograph.title" />
                    </td>
                    <td>
                        <input class="form-control"
                                type="text"
                                aria-labelledby="cl02"
                                data-ng-model="photomicrograph.creatorCapturing" />
                    </td>
                    <td>
                        <input class="form-control"
                                type="text"
                                aria-labelledby="cl03"
                                data-ng-model="photomicrograph.creatorProcessing" />
                    </td>
                    <td>
                        <input class="form-control"
                                type="number"
                                min="-10000"
                                max="10000"
                                aria-labelledby="cl04"
                                data-ng-model="photomicrograph.microscopeSettingsDicPrismPosition" />
                    </td>
                    <td>
                        <a class="btn btn-default form-control"
                                target="_blank"
                                data-ng-show="photomicrograph.presentationUri"
                                data-ng-href="{{photomicrograph.presentationUri}}">In viewer
                        </a>
                        <a class="btn btn-default form-control"
                                target="_blank"
                                data-ng-hide="photomicrograph.presentationUri"
                                data-ng-href="{{photomicrograph.fileUri}}">Long shot
                        </a>
                    </td>
                    <td>
                        <a class="btn btn-default form-control" data-ng-href="#/photomicrograph/{{photomicrograph.id}}">
                            Show / Edit
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="col-md-12">
        <div>
            <div data-ng-if="vm.alert"
                    data-uib-alert=""
                    data-type="{{vm.alert.type}}"
                    data-dismiss-on-timeout="5000"
                    data-close="vm.closeAlert()">
                {{vm.alert.message}}
            </div>
        </div>
    </div>
    <p class="col-md-12 actions">
        <button class="btn btn-primary" type="submit">Submit</button>
        <button class="btn btn-default" type="button" data-ng-click="vm.resetForm()">Reset</button>
        <button class="btn btn-danger" type="button" data-ng-if="vm.deleteOrganism" data-ng-click="vm.deleteOrganism()">Delete</button>
        <button class="btn btn-default" type="button" data-ng-if="vm.copyOrganism" data-ng-click="vm.copyOrganism()">Copy</button>
    </p>
</form>
